(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[829],{1752:function(e,t,n){n(7905)},9923:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/AllData",function(){return n(2974)}])},9143:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var a=n(5893);function s(e){return(0,a.jsxs)("div",{className:function(){let t=e.bgcolor?" bg-"+e.bgcolor:"",n=e.txtcolor?" text-"+e.txtcolor:" text-white";return"card mb-3"+t+n}(),style:{maxWidth:"18rem"},children:[e.img&&(0,a.jsx)("img",{src:e.img,alt:"Transmis du parent"}),(0,a.jsx)("div",{className:"card-header",children:e.header}),(0,a.jsxs)("div",{className:"card-body",children:[e.title&&(0,a.jsx)("h5",{className:"card-title",children:e.title}),e.text&&(0,a.jsx)("p",{className:"card-text",children:e.text}),e.body,e.status&&(0,a.jsx)("div",{id:"createStatus",children:e.status})]})]})}},5702:function(e,t,n){"use strict";n.d(t,{h:function(){return c}}),n(1752),n(1163);let a={get:s("GET"),post:s("POST"),put:s("PUT"),delete:s("DELETE")};function s(e){return async(t,n)=>{let a={method:e,headers:function(e){let t=JSON.parse(localStorage.getItem("user")),n=null==t?void 0:t.token;return n?{Authorization:"Bearer ".concat(t.token)}:{}}(0)};return n&&(a.headers["Content-Type"]="application/json",a.body=JSON.stringify(n)),fetch(t,a).then(r)}}async function r(e){var t,n;let a=null===(n=e.headers)||void 0===n?void 0:null===(t=n.get("content-type"))||void 0===t?void 0:t.includes("application/json");console.log("response :",e);let s=a?await e.json():null;console.log("data :",s);let r=JSON.parse(localStorage.getItem("user"));if(!e.ok){[401,403].includes(e.status)&&(null==r?void 0:r.token)&&c.logout();let t=s&&s.message||e.statusText;return Promise.reject(t)}return s}let l="/api",c={login:o,getCurrentUser:i,logout:function(){localStorage.removeItem("user")},register:u,updateBalance:d,getAll:h,getBankAccounts:m,createBankAccount:x};async function i(){return await JSON.parse(localStorage.getItem("user"))}async function o(e){let{email:t,password:n}=e,s=await a.post("".concat(l,"/account/login"),{email:t,password:n});return localStorage.setItem("user",JSON.stringify(s)),s}async function u(e){await a.post("".concat(l,"/account/register"),e)}async function d(e){let{email:t,amount:n}=e;return await a.post("".concat(l,"/updateBalance"),{email:t,amount:parseFloat(n)})}async function h(){return await a.get("".concat(l,"/account/all"))}async function m(e){let{email:t}=e;return await a.post("".concat(l,"/bankAccounts/get"),{email:t})}async function x(e){let{email:t,accountName:n}=e;return await a.post("".concat(l,"/bankAccounts/createAccount"),{email:t,accountName:n})}},2974:function(e,t,n){"use strict";n.r(t);var a=n(5893),s=n(7294),r=n(9143),l=n(390),c=n(5702);function i(e){var t,n;return(0,a.jsx)(r.Z,{bgcolor:"secondary",header:"".concat(e.userData.name),status:"",body:(0,a.jsxs)("div",{className:"",children:[(0,a.jsxs)("p",{children:["User : ",e.userData.name]}),(0,a.jsxs)("p",{children:["Email : ",e.userData.email]}),(0,a.jsxs)("p",{children:["Password : ",e.userData.hash]}),(0,a.jsxs)("p",{className:"fw-bold font-weight-bold",children:["Balance : ",(0,a.jsxs)("span",{className:"text-success bg-dark width-medium p-2 rounded",children:["$ ",e.userData.balance]})]}),(0,a.jsx)("hr",{className:"hr"}),(0,a.jsx)("h4",{className:"text-center",children:"History"}),(0,a.jsx)("div",{className:"d-flex flex-wrap flex-column-reverse",children:null==e?void 0:null===(n=e.userData)||void 0===n?void 0:null===(t=n.history)||void 0===t?void 0:t.map(e=>(0,a.jsxs)("div",{className:"bg-lightGray rounded width-meduim  my-2 d-flex ",style:{width:"16rem"},children:[(0,a.jsx)("div",{className:"border border-2 rounded bg-light border-light date-item text-dark",style:{width:180},children:null==e?void 0:e.date}),"",(0,a.jsxs)("div",{className:"text-center "+((null==e?void 0:e.amount)>0?"text-success":"text-danger"),style:{fontWeight:"bold",width:80,alignSelf:"center"},children:[(null==e?void 0:e.amount)>0?"+":"-"," ",Math.abs(null==e?void 0:e.amount)]})]}))}),(0,a.jsx)("hr",{className:"hr"})]})})}t.default=function(){let{currentUser:e,setCurrentUser:t}=(0,l.Z)(),[n,r]=s.useState(),[o,u]=s.useState(!1);return s.useEffect(()=>{u(!0);let e=async()=>{var e;await (null===(e=c.h)||void 0===e?void 0:e.getAll().then(e=>{r(e)}).catch(e=>console.error("error :",e)).finally(()=>u(!1)))};e()},[]),(0,a.jsx)("div",{className:"justify-content-center align-items-center d-flex flex-wrap justify-content-around w-100",children:(null==n?void 0:n.length)>0?(0,a.jsx)(a.Fragment,{children:n.map((e,t)=>(0,a.jsx)(i,{userData:e},t))}):o?(0,a.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,a.jsx)("div",{className:"spinner-border",role:"status",children:(0,a.jsx)("span",{className:"visually-hidden",children:"Loading..."})})}):(0,a.jsx)("h2",{children:"No data to display"})})}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=9923)}),_N_E=e.O()}]);